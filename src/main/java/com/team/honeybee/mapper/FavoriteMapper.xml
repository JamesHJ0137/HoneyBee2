<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.honeybee.mapper.FavoriteMapper">
	<!-- 좋아요 확인 -->
	<select id="findFavorite" resultType="com.team.honeybee.domain.FavoriteDto">
		SELECT id,
				donation_id donationId,
				member_id memberId,
				heart
		FROM Favorite
		WHERE member_id = #{memberId}
				AND
			  donation_id = #{donationId}
	</select>
	<!-- 좋아요 갯수 -->
	<select id="countHeart" resultType="com.team.honeybee.domain.FavoriteDto">
		SELECT COUNT(donation_id) count
		FROM Favorite
		WHERE donation_id = #{donationId}
	</select>
	
	<!-- 좋아요 저장 -->
	<insert id="insertFavorite" parameterType="com.team.honeybee.domain.FavoriteDto">
		INSERT INTO Favorite (member_id, donation_id, heart)
				VALUES (#{memberId}, #{donationId}, 1)
	</insert>
	<!-- 이미 있는 좋아요 삭제 -->
	<delete id="deleteFavorite" parameterType="com.team.honeybee.domain.FavoriteDto">
		DELETE FROM Favorite 
		WHERE donation_id = #{donationId}
				AND
			  member_id = #{memberId}
	</delete>
</mapper>